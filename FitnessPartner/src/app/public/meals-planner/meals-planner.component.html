<div class="container my-2">
  <h2 class="text-center mb-4 text-gradient p-3" style="color: #cb4c0d">
    Your Personalized Meal Planner
  </h2>

  <label for="goal" class="form-label">Select Your Goal:</label>
  <select
    id="goal"
    class="form-select"
    [(ngModel)]="selectedGoal"
    (change)="onGoalChange()"
  >
    <option value="" disabled selected>-- Select Goal --</option>
    <option *ngFor="let g of goals" [value]="g">{{ g }}</option>
  </select>

  <ng-container *ngIf="plan; else noPlan">
    <h2 class="my-4">
      Meal Plan for: <span class="text-primary">{{ plan.target }}</span>
    </h2>

    <div class="table-responsive">
      <table class="table table-striped table-bordered align-middle">
        <thead class="table-light">
          <tr class="text-center">
            <th scope="col">Meal</th>
            <th scope="col">Items</th>
            <th scope="col">Calories</th>
            <th scope="col">Protein (g)</th>
            <th scope="col">Carbs (g)</th>
            <th scope="col">Fats (g)</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let key of mealKeys">
            <td class="meal-type">{{ key | titlecase }}</td>
            <td class="items-cell">
              <div
                *ngFor="let item of plan.plan[key].items"
                class="item-inline"
              >
                <img
                  [src]="item.image"
                  alt="{{ item.name }}"
                  class="item-thumb"
                />
                <span>{{ item.name }}</span> <br />
                <br />
              </div>
            </td>
            <td>{{ plan.plan[key].calories }}</td>
            <td>{{ plan.plan[key].protein }}</td>
            <td>{{ plan.plan[key].carbs }}</td>
            <td>{{ plan.plan[key].fats }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </ng-container>

  <ng-template #noPlan>
    <div class="alert alert-warning mt-4">
      Please select a goal above to view your custom meal plan.
    </div>
  </ng-template>
</div>
